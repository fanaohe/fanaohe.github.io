<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2">






<meta name="description" content="Python全栈开发">
<meta property="og:type" content="website">
<meta property="og:title" content="范澳河技术博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="范澳河技术博客">
<meta property="og:description" content="Python全栈开发">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="范澳河技术博客">
<meta name="twitter:description" content="Python全栈开发">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>范澳河技术博客</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">范澳河技术博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/28/Hexo进阶加部署/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/Hexo进阶加部署/" itemprop="url">Hexo进阶加部署</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T16:12:22+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1-创建“分类”页面"><a href="#1-创建“分类”页面" class="headerlink" title="1. 创建“分类”页面"></a>1. 创建“分类”页面</h5><ul>
<li><p>新建分类页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>
</li>
<li><p>给分类页面添加类型</p>
<p>我们在source文件夹中的categories文件夹下找到index.md文件，并在它的头部加上type属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章分类</span><br><span class="line">date: 2017-05-27 13:47:40</span><br><span class="line">type: &quot;categories&quot;   #这部分是新添加的</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
<li><p>给模板添加分类属性</p>
<p>现在我们打开scarffolds文件夹里的post.md文件，给它的头部加上<code>categories:</code>，这样我们创建的所有新的文章都会自带这个属性，我们只需要往里填分类，就可以自动在网站上形成分类了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">categories:</span><br><span class="line">tags:</span><br></pre></td></tr></table></figure>
</li>
<li><p>给文章添加分类</p>
<p>现在我们可以找到一篇文章，然后尝试给它添加分类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">layout: posts</span><br><span class="line">title: 写给小白的express学习笔记1： express-static文件静态管理</span><br><span class="line">date: 2018-06-07 00:38:36</span><br><span class="line">categories: 学习笔记</span><br><span class="line">tags: [node.js, express]</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="2-创建“标签”页面"><a href="#2-创建“标签”页面" class="headerlink" title="2. 创建“标签”页面"></a>2. 创建“标签”页面</h5><p>创建”标签”页的方式和创建“分类”一样。</p>
<ul>
<li><p>新建“标签”页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
</li>
<li><p>给标签页面添加类型</p>
<p>我们在source文件夹中的tags文件夹下找到index.md文件，并在它的头部加上type属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">title: tags</span><br><span class="line">date: 2018-08-06 22:48:29</span><br><span class="line">type: &quot;tags&quot; #新添加的内容</span><br></pre></td></tr></table></figure>
</li>
<li><p>给文章添加标签</p>
<p>有两种写法都可以，第一种是类似数组的写法，把标签放在中括号<code>[]</code>里，用英文逗号隔开</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">layout: posts</span><br><span class="line">title: 写给小白的express学习笔记1： express-static文件静态管理</span><br><span class="line">date: 2018-06-07 00:38:36</span><br><span class="line">categories: 学习笔记</span><br><span class="line">tags: [node.js, express]</span><br></pre></td></tr></table></figure>

<p>第二种写法是用<code>-</code>短划线列出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">layout: posts</span><br><span class="line">title: 写给小白的express学习笔记1： express-static文件静态管理</span><br><span class="line">date: 2018-06-07 00:38:36</span><br><span class="line">categories: 学习笔记</span><br><span class="line">tags: </span><br><span class="line">- node.js</span><br><span class="line">- express</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="部署域名"><a href="#部署域名" class="headerlink" title="部署域名"></a>部署域名</h3><p>紧接着我们就可以把这些内容添加到Github页面上，然后生成我们自己的博客了。</p>
<h4 id="部署Github"><a href="#部署Github" class="headerlink" title="部署Github"></a>部署Github</h4><ul>
<li><p>首先你必须有一个github账号</p>
</li>
<li><p>然后新建一个仓库，这一有第一个坑，项目名一定要是<code>用户名.github.io</code>的形式</p>
</li>
</ul>
<ul>
<li><p>这个时候github页面其实就生成好了，但是我们的内容还需要同步到github上，所以打开hexo文件夹里的配置文件config.yml，添加部署路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/qYinchunhui/qyinchunhui.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>





</li>
</ul>
<p>  这里注意两小点：</p>
<ul>
<li><p>属性和内容之间一定要有一个空格，配置文件有自己的格式规范</p>
</li>
<li><p>如果你之前没有用git关联过自己的github库，需要配置SSH等参数，否则无法成功，这部分搜git就有很多相关教程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  #清除缓存</span><br><span class="line">hexo g #打包</span><br><span class="line">hexo d #部署</span><br></pre></td></tr></table></figure>

























</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/28/hexo搭建个人博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/hexo搭建个人博客/" itemprop="url">Hexo搭建个人博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T09:02:16+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h4><p>安装Hexo之前，必须保证自己的电脑中<strong>已经安装好了Node.js和Git</strong>。因为这两个软件我之前都安装过，这里就不重复安装过程了，检验方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">node -v</span><br></pre></td></tr></table></figure>

<h4 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h4><p>安装好node.js和git后，可以通过npm来安装Hexo。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h4 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo init  #新建文件夹，初始化hexo项目</span><br><span class="line">npm install #如果提示下载依赖运行此命令，没提示不用运行</span><br></pre></td></tr></table></figure>

<h5 id="config-yml"><a href="#config-yml" class="headerlink" title="config.yml"></a>config.yml</h5><p>博客的配置文件，博客的名称、关键词、作者、语言、博客主题…设置都在里面。</p>
<h5 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h5><p>应用程序信息，新添加的插件内容也会出现在这里面，我们可以不修改这里的内容。</p>
<h5 id="scaffolds"><a href="#scaffolds" class="headerlink" title="scaffolds"></a>scaffolds</h5><p>scaffolds就是脚手架的意思，这里放了三个模板文件，分别是新添加博客文章（posts）、新添加博客页（page）和新添加草稿（draft）的目标样式。</p>
<p>这部分可以修改的内容是，我们可以在模板上添加比如categories等自定义内容</p>
<h5 id="source"><a href="#source" class="headerlink" title="source"></a>source</h5><p>source是放置我们博客内容的地方，里面初始只有两个文件夹，一个是drafts（草稿），一个posts（文章），但之后我们通过命令新建tags（标签）还有categories（分类）页后，这里会相应地增加文件夹。</p>
<h5 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h5><p>放置主题文件包的地方。Hexo会根据这个文件来生成静态页面。</p>
<p>初始状态下只有landscape一个文件夹，后续我们可以添加自己喜欢的。</p>
<h3 id="Hexo命令"><a href="#Hexo命令" class="headerlink" title="Hexo命令"></a>Hexo命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;名称&quot;   #新建md文件</span><br><span class="line">hexo generate / hexo g   #生成静态页面</span><br><span class="line">hexo deploy / hexo d     #部署</span><br><span class="line">hexo server / hexo s     #启动   localhost:4000 访问自己博客</span><br></pre></td></tr></table></figure>








          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/10/编码中遇到的时区问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/10/编码中遇到的时区问题/" itemprop="url">编码中遇到的时区问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-10T00:21:57+08:00">
                2019-06-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="编码中遇到的时区问题"><a href="#编码中遇到的时区问题" class="headerlink" title="编码中遇到的时区问题"></a>编码中遇到的时区问题</h3><p>最近在编码的过程中遇到这样一个问题： 我需要获取用户今天是否刷了卡，如果已经刷了一次就禁止再刷，也就是让一张卡一天只能刷一次，但发现用户在早上8点之前无法刷卡，过了8点之后就可以刷一次了。</p>
<p>最终发现原来是服务器时区设置问题，之前我获取当前日期的代码为</p>
<p>import time<br>time.strftime(“%Y-%m-%d”, time.localtime())<br>这样获取的是本机设置的时区时间，如果本机设置的时区不是东八区那就悲剧了。</p>
<p>于是改进一下：</p>
<p>time.strftime(“%Y-%m-%d”, time.gmtime(int(time.time()+8*3600)))<br>这样就固定获取东八区时间，也就是北京时间了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/支持向量机SVM——百度百科/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/支持向量机SVM——百度百科/" itemprop="url">支持向量机SVM——百度百科</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:12:22+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/svm/" itemprop="url" rel="index">
                    <span itemprop="name">svm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="支持向量机SVM——百度百科"><a href="#支持向量机SVM——百度百科" class="headerlink" title="支持向量机SVM——百度百科"></a>支持向量机SVM——百度百科</h3><p>支持向量机（英语：Support Vector Machine, 简称SVM)，是一种有监督学习方法，可被广泛应用于统计分类以及线性回归。</p>
<p>Vapnik等人在多年研究统计学习理论基础上对线性分类器提出了另一种设计最佳准则。其原理也从线性可分说起，然后扩展到线性不可分的情况。甚至扩展到使用非线性函数中去，这种分类器被称为支持向量机。</p>
<p>主要思想</p>
<p>⑴ 它是针对线性可分情况进行分析，对于线性不可分的情况，通过使用非线性映射算法将低维输入空间线性不可分的样本转化为高维特征 空间使其线性可分，从而使得高维特征空间采用线性算法对样本的非线性特征进行线性分析成为可能；</p>
<p>举例：如下图：将1维的“线性不可分”上升到2维后就成为线性可分了。</p>
<p><img src="https://images0.cnblogs.com/blog/408927/201305/28202656-4de88ceaa1234195a5fe0010fc0610cf.png" alt="avatar"><br>⑵ 它基于结构风险最小化理论之上在特征空间中建构最优分割超平面，使得学习器得到全局最优化，并且在整个样本空间的期望风险以某个概率满足一定上界。</p>
<p>一般特征</p>
<p>⑴ SVM学习问题可以表示为凸优化问题，因此可以利用已知的有效算法发现目标函数的全局最小值。而其他分类方法（如基于规则的分类器和人工神经网络）都采用一种基于贪心学习的策略来搜索假设空间，这种方法一般只能获得局部最优解。</p>
<p>⑵ SVM通过最大化决策边界的边缘来控制模型的能力。尽管如此，用户必须提供其他参数，如使用核函数类型和引入松弛变量等。</p>
<p>⑶ 通过对数据中每个分类属性引入一个哑变量，SVM可以应用于分类数据。</p>
<p>⑷ SVM一般只能用在二类问题，对于多类问题效果不好。</p>
<p>原理简介</p>
<p>SVM方法是通过一个非线性映射p，把样本空间映射到一个高维乃至无穷维的特征空间中（Hilbert空间），使得在原来的样本空间中非线性可分的问题转化为在特征空间中的线性可分的问题。简单地说，就是升维和线性化。升维，就是把样本向高维空间做映射，一般情况下这会增加计算的复杂性，甚至会引起“维数灾难”，因而人们很少问津。但是作为分类、回归等问题来说，很可能在低维样本空间无法线性处理的样本集，在高维特征空间中却可以通过一个线性超平面实现线性划分（或回归）。一般的升维都会带来计算的复杂化，SVM方法巧妙地解决了这个难题：应用核函数的展开定理，就不需要知道非线性映射的显式表达式；由于是在高维特征空间中建立线性学习机，所以与线性模型相比，不但几乎不增加计算的复杂性，而且在某种程度上避免了“维数灾难”．这一切要归功于核函数的展开和计算理论。</p>
<p>常用核函数</p>
<p>⑴ 线性核函数K(x,y)=x·y；</p>
<p>⑵ 多项式核函数K(x,y)=[(x·y)+1]d；</p>
<p>⑶ 径向基函数K(x,y)=exp(-|x-y|^2/d^2）</p>
<p>⑷ 二层神经网络核函数K(x,y)=tanh(a(x·y)+b）．</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/19/pythonC3线性算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/19/pythonC3线性算法/" itemprop="url">pythonC3线性算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-19T00:21:57+08:00">
                2019-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="pythonC3线性算法"><a href="#pythonC3线性算法" class="headerlink" title="pythonC3线性算法"></a>pythonC3线性算法</h3><p>在介绍算法之前，我们首先约定需要使用的符号。我们用 C1 C2⋯CN</p>
<p>head(C1 C2⋯CN)=C1</p>
<p>为了方便做列表连接操作，我们记：</p>
<p>假设类 C</p>
<p>这个公式表明 C</p>
<p>接下来我们介绍 C3 线性化中最重要的操作 merge</p>
<p>选取 merge<br>令 h=head(K)<br>否则，设置 K<br>如果 merge<br>上面的过程看起来好像很复杂，我们用一个例子来具体执行一下，你就会觉得其实还是挺简单的。假设我们有如下的一个类继承关系：</p>
<p>class A(object):</p>
<pre><code>def __init__(self):
    print(&quot;enter A&quot;)
    super(A, self).__init__()
    print(&quot;leave A&quot;)</code></pre><p>class B(object):</p>
<pre><code>def __init__(self):
    print(&quot;enter B&quot;)
    super(B, self).__init__()
    print(&quot;leave B&quot;)</code></pre><p>class C(object):</p>
<pre><code>def __init__(self):
    print(&quot;enter C&quot;)
    super(C, self).__init__()
    print(&quot;leave C&quot;)</code></pre><p>class D(A):</p>
<pre><code>def __init__(self):
    print(&quot;enter D&quot;)
    super(D, self).__init__()
    print(&quot;leave D&quot;)</code></pre><p>class E(A, C):</p>
<pre><code>def __init__(self):
    print(&quot;enter E&quot;)
    super(E, self).__init__()
    print(&quot;leave E&quot;)</code></pre><p>class F(D, B):</p>
<pre><code>def __init__(self):
    print(&quot;enter F&quot;)
    super(F, self).__init__()
    print(&quot;leave F&quot;)</code></pre><p>class G(E, F):</p>
<pre><code>def __init__(self):
    print(&quot;enter G&quot;)
    super(G, self).__init__()
    print(&quot;leave G&quot;)</code></pre><p>“””<br>l[F(D, B)] = F + merge(l(D), l(B), DB)<br>             F + merge([D, A], B, [D, B])<br>             [F, D, A, B]<br>l[G(E, F)] = G + merge(l(E), l(F), EF)<br>             G + merge([E, A, C], [F, D, A, B], [E, F])<br>             [G, E, F, D, A, C, B]</p>
<p>“””</p>
<p>print(G.mro())</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/16/K-means/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/16/K-means/" itemprop="url">K-means</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-16T16:12:22+08:00">
                2019-04-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/K-means/" itemprop="url" rel="index">
                    <span itemprop="name">K-means</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="K-means"><a href="#K-means" class="headerlink" title="K-means"></a>K-means</h3><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>K-means算法是是最经典的聚类算法之一，它的优美简单、快速高效被广泛使用。它是很典型的基于距离的聚类算法，采用距离作为相似性的评价指标，即认为两个对象的距离越近，其相似度就越大。该算法认为簇是由距离靠近的对象组成的，因此把得到紧凑且独立的簇作为最终目标。</p>
<p>图示<br><img src="https://images0.cnblogs.com/blog/408927/201409/162257529256185.jpg" alt="avatar"></p>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>从N个文档随机选取K个文档作为质心<br>对剩余的每个文档测量其到每个质心的距离，并把它归到最近的质心的类<br>重新计算已经得到的各个类的质心<br>迭代2～3步直至新的质心与原质心相等或小于指定阈值，算法结束<br>优点</p>
<p>k-平均算法是解决聚类问题的一种经典算法，算法简单、快速。<br>对处理大数据集，该算法是相对可伸缩的和高效率的，因为它的复杂度大约是O（nkt），其中n是所有对象的数目，k是簇的数目，t是迭代的次数。通常k&lt;&lt;n。这个算法经常以局部最优结束。<br>算法尝试找出使平方误差函数值最小的k个划分。当簇是密集的、球状或团状的，而簇与簇之间区别明显时，它的聚类效果很好。<br>缺点</p>
<p>K 是事先给定的，这个 K 值的选定是非常难以估计的；<br>对初值敏感，对于不同的初始值，可能会导致不同的聚类结果。一旦初始值选择的不好，可能无法得到有效的聚类结果；<br>该算法需要不断地进行样本分类调整，不断地计算调整后的新的聚类中心，因此当数据量非常大时，算法的时间开销是非常大的。<br>不适合于发现非凸面形状的簇，或者大小差别很大的簇；<br>对于”噪声”和孤立点数据敏感，少量的该类数据能够对平均值产生极大影响。<br>改进</p>
<p><a href="http://tech.ddvip.com/2013-12/1387352834207177.html" target="_blank" rel="noopener">http://tech.ddvip.com/2013-12/1387352834207177.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/09/golang开发环境/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/09/golang开发环境/" itemprop="url">golang开发环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-09T16:12:22+08:00">
                2019-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="golang开发环境"><a href="#golang开发环境" class="headerlink" title="golang开发环境"></a>golang开发环境</h3><p>1.1 go环境安装<br>　　1、go下载安装</p>
<p>　　　　　　官方：<a href="https://golang.org/dl" target="_blank" rel="noopener">https://golang.org/dl</a></p>
<p>　　　　　　国内：</p>
<p>　　　　　　　　<a href="https://golang.google.cn/dl/" target="_blank" rel="noopener">https://golang.google.cn/dl/</a></p>
<p>　　　　　　　　<a href="https://www.golangtc.com/download" target="_blank" rel="noopener">https://www.golangtc.com/download</a></p>
<p>　　　　调整go环境变量</p>
<p>　　　　　　我的电脑 –&gt; 高级  –&gt; 环境变量</p>
<p>　　　　　　1. 首先要把go安装目录下的bin目录放到Path环境变量中，并添加我们代码的存放位置（系统变量path路径）</p>
<p>　　　　　　　　　　C:\Go\bin             # go安装路径</p>
<p>　　　　　　　　　　C:\onlineGo         # 我们代码存放路径</p>
<p>　　　　　　2. 指定go编译器安装的目录（GOROOT   默认安装时就是这个路径 用户变量）</p>
<p>　　　　　　　　　　C:\go</p>
<p>　　　　　　3. 我自己写的代码要放到这个变量中配置的目录中，go编译器才会找到并编译（GOPATH 用户变量）</p>
<p>　　　　　　　　　　C:\onlineGo                 # 指定GOPATH路径</p>
<p>　　　　　　　　　　C:\onlineGo\src           # src 我们写的代码路径</p>
<p>　　　　　　　　　　C:\onlineGo\pkg          # pkg 生成的临时文件、库文件</p>
<p>　　　　　　　　　　C:\onlineGo\bin　       # go build 生成的bin文件都在这里</p>
<p>　　　　　　4. 确认我们修改的路径（go env）<br><img src="https://img2018.cnblogs.com/blog/1080958/201903/1080958-20190316182436681-872641048.png" alt="avatar"></p>
<p>2、goland开发环境（ide）</p>
<p>　　　　　　1. goland开发环境： <a href="https://www.jetbrains.com/go/download/#section=windows" target="_blank" rel="noopener">https://www.jetbrains.com/go/download/#section=windows</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/centos7配置iscsi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/centos7配置iscsi/" itemprop="url">centos7配置iscsi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-19T16:12:22+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="centos7配置iscsi"><a href="#centos7配置iscsi" class="headerlink" title="centos7配置iscsi"></a>centos7配置iscsi</h3><p>iSCSI stands for  Internet Small Computer Systems Interface, an IP-based storage, works on top of internet protocol by carrying SCSI commands over IP network. iSCSI transports block-level data between an iSCSI initiator on a client machine and an iSCSI target on a storage device (server).</p>
<p>Environment:<br>Server: server.itzgeek.local<br>IP Address: 192.168.12.20<br>Client: node1.itzgeek.local<br>IP Address: 192.168.12.11<br>Storage Configuration:<br>Here, we will create 5GB of LVM disk on the target server to use as a shared storage for clients. Let’s list the available disks attached to the target server using below command. If you want to use the whole disk for LVM, skip the below step.</p>
<p>[root@server ~]# fdisk -l | grep -i sd<br> Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors<br> /dev/sda1   *        2048     1026047      512000   83  Linux<br> /dev/sda2         1026048   209715199   104344576   8e  Linux LVM<br> Disk /dev/sdb: 10.7 GB, 10737418240 bytes, 20971520 sectors<br>From the above output, you can see that my system has a 10GB of disk (/dev/sdb). We will create a 5GB partition on the above disk and will use it for LVM.</p>
<p>[root@server ~]# fdisk /dev/sdb<br> Welcome to fdisk (util-linux 2.23.2).<br> Changes will remain in memory only, until you decide to write them.<br> Be careful before using the write command.<br> Device does not contain a recognized partition table<br> Building a new DOS disklabel with disk identifier 0x173dfa4d.<br> Command (m for help): n  –&gt; New partition<br> Partition type:<br>   p   primary (0 primary, 0 extended, 4 free)<br>   e   extended<br> Select (default p): p –&gt; Pimary partition<br> Partition number (1-4, default 1): 1 - -&gt; Partition number<br> First sector (2048-20971519, default 2048): –&gt; Just enter<br> Using default value 2048<br> Last sector, +sectors or +size{K,M,G} (2048-20971519, default 20971519): +5G  –&gt; Enter the size<br> Partition 1 of type Linux and of size 5 GiB is set<br> Command (m for help): t  –&gt; Change label<br> Selected partition 1<br> Hex code (type L to list all codes): 8e –&gt; Change it as LVM label<br> Changed type of partition ‘Linux’ to ‘Linux LVM’<br> Command (m for help): w –&gt; Save<br> The partition table has been altered!
 Calling ioctl() to re-read partition table.<br> Syncing disks.<br>Create a LVM with /dev/sdb1 partition (replace /dev/sdb1 with your disk name)</p>
<p>[root@server ~]# pvcreate /dev/sdb1<br>[root@server ~]# vgcreate vg_iscsi /dev/sdb1<br>[root@server ~]# lvcreate -l 100%FREE -n lv_iscsi vg_iscsi<br>Creating iSCSI target:<br>Now you have an option of creating target either with authentication or without authentication. In this article, you can find steps for both scenarios. It is up to you to decide which one is suitable for your environment.</p>
<p>Configuring iSCSI Targets with CHAP authentication:<br>Install the targetcli package on the server.</p>
<p>[root@server ~]# yum install targetcli -y<br>Once you installed the package, enter below command to get a iSCSI CLI for an interactive prompt.</p>
<p>[root@server ~]# targetcli<br>Warning: Could not load preferences file /root/.targetcli/prefs.bin.<br>targetcli shell version 2.1.fb41<br>Copyright 2011-2013 by Datera, Inc and others.<br>For help on commands, type ‘help’.</p>
<blockquote>
</blockquote>
<p>Now use an existing logical volume (/dev/vg_iscsi/lv_iscsi) as a block-type backing store for storage object “scsi_disk1_server“.</p>
<p>/&gt; cd backstores/block<br>/backstores/block&gt; create scsi_disk1_server /dev/vg_iscsi/lv_iscsi<br>Created block storage object scsi_disk1_server using /dev/vg_iscsi/lv_iscsi.<br>Create a target.</p>
<p>/backstores/block&gt; cd /iscsi<br>/iscsi&gt; create iqn.2016-02.local.itzgeek.server:disk1<br>Created target iqn.2016-02.local.itzgeek.server:disk1.<br>Created TPG 1.<br>Global pref auto_add_default_portal=true<br>Created default portal listening on all IPs (0.0.0.0), port 3260.<br>/iscsi&gt;<br>Create ACL for client machine (It’s the IQN which clients use to connect).</p>
<p>/iscsi&gt; cd /iscsi/iqn.2016-02.local.itzgeek.server:disk1/tpg1/acls<br>/iscsi/iqn.20…sk1/tpg1/acls&gt; create iqn.2016-02.local.itzgeek.server:node1node2<br>Created Node ACL for iqn.2016-02.local.itzgeek.server:node1node2<br>Set CHAP authentication.</p>
<p>/iscsi/iqn.20…sk1/tpg1/acls&gt; cd iqn.2016-02.local.itzgeek.server:node1node2<br>/iscsi/iqn.20…er:node1node2&gt; set auth userid=user<br>Parameter userid is now ‘user’.<br>/iscsi/iqn.20…er:node1node2&gt;  set auth password=password<br>Parameter password is now ‘password’.<br>Create a LUN under the target, The LUN should use the previously mentioned backing storage object named “scsi_disk1_server”</p>
<p>/iscsi/iqn.20…er:node1node2&gt; cd /iscsi/iqn.2016-02.local.itzgeek.server:disk1/tpg1/luns<br>/iscsi/iqn.20…sk1/tpg1/luns&gt; create /backstores/block/scsi_disk1_server<br>Created LUN 0.<br>Created LUN 0-&gt;0 mapping in node ACL iqn.2016-02.local.itzgeek.server:node1node2<br>Verify the target server configuration.</p>
<p>/iscsi/iqn.20…/tpg1/portals&gt; cd /<br>/&gt; ls<br>o- / …………………………………………………………………………………………………………. […]<br>  o- backstores ……………………………………………………………………………………………….. […]<br>  | o- block …………………………………………………………………………………….. [Storage Objects: 1]<br>  | | o- scsi_disk1_server ………………………………………….. [/dev/vg_iscsi/lv_iscsi (5.0GiB) write-thru activated]<br>  | o- fileio ……………………………………………………………………………………. [Storage Objects: 0]<br>  | o- pscsi …………………………………………………………………………………….. [Storage Objects: 0]<br>  | o- ramdisk …………………………………………………………………………………… [Storage Objects: 0]<br>  o- iscsi ……………………………………………………………………………………………… [Targets: 1]<br>  | o- iqn.2016-02.local.itzgeek.server:disk1 …………………………………………………………………. [TPGs: 1]<br>  |   o- tpg1 ………………………………………………………………………………….. [no-gen-acls, no-auth]<br>  |     o- acls ……………………………………………………………………………………………. [ACLs: 1]<br>  |     | o- iqn.2016-02.local.itzgeek.server:node1node2 …………………………………………………. [Mapped LUNs: 1]<br>  |     |   o- mapped_lun0 …………………………………………………………… [lun0 block/scsi_disk1_server (rw)]<br>  |     o- luns ……………………………………………………………………………………………. [LUNs: 1]<br>  |     | o- lun0 ……………………………………………………… [block/scsi_disk1_server (/dev/vg_iscsi/lv_iscsi)]<br>  |     o- portals ………………………………………………………………………………………. [Portals: 1]<br>  |       o- 0.0.0.0:3260 ……………………………………………………………………………………….. [OK]<br>  o- loopback …………………………………………………………………………………………… [Targets: 0]<br>Save and exit from target CLI.</p>
<p>/&gt; saveconfig<br>Last 10 configs saved in /etc/target/backup.<br>Configuration saved to /etc/target/saveconfig.json<br>/&gt; exit<br>Global pref auto_save_on_exit=true<br>Last 10 configs saved in /etc/target/backup.<br>Configuration saved to /etc/target/saveconfig.json<br>Enable and restart the target service.</p>
<p>[root@server ~]# systemctl enable target.service<br>[root@server ~]# systemctl restart target.service<br>Configure the firewall to allow iSCSI traffic.</p>
<p>[root@server ~]# firewall-cmd –permanent –add-port=3260/tcp<br>[root@server ~]# firewall-cmd –reload<br>Configure Initiator with CHAP authentication:<br>Now it’s the time to configure a client machine to use this target as a storage, install below package on the client machine (node1).</p>
<p>[root@node1 ~]# yum install iscsi-initiator-utils -y<br>Edit below file and add iscsi initiator name.</p>
<p>[root@node1 ~]# vi /etc/iscsi/initiatorname.iscsi<br>InitiatorName=iqn.2016-02.local.itzgeek.server:node1node2<br>Discover the target using below command.</p>
<p>[root@node1 ~]# iscsiadm -m discovery -t st -p 192.168.12.20<br> 192.168.12.20:3260,1 iqn.2016-02.local.itzgeek.server:disk1<br>Enable CHAP authentication in iscsid.conf file, uncomment and modify the green colored lines as per your environment.</p>
<p>[root@node1 ~]# vi /etc/iscsi/iscsid.conf</p>
<h1 id="To-enable-CHAP-authentication-set-node-session-auth-authmethod"><a href="#To-enable-CHAP-authentication-set-node-session-auth-authmethod" class="headerlink" title="To enable CHAP authentication set node.session.auth.authmethod"></a>To enable CHAP authentication set node.session.auth.authmethod</h1><h1 id="to-CHAP-The-default-is-None"><a href="#to-CHAP-The-default-is-None" class="headerlink" title="to CHAP. The default is None."></a>to CHAP. The default is None.</h1><p>node.session.auth.authmethod = CHAP</p>
<h1 id="To-set-a-CHAP-username-and-password-for-initiator"><a href="#To-set-a-CHAP-username-and-password-for-initiator" class="headerlink" title="To set a CHAP username and password for initiator"></a>To set a CHAP username and password for initiator</h1><h1 id="authentication-by-the-target-s-uncomment-the-following-lines"><a href="#authentication-by-the-target-s-uncomment-the-following-lines" class="headerlink" title="authentication by the target(s), uncomment the following lines:"></a>authentication by the target(s), uncomment the following lines:</h1><p>node.session.auth.username = user<br>node.session.auth.password = password<br>Restart and enable the initiator service.</p>
<p>[root@node1 ~]# systemctl restart iscsid.service<br>[root@node1 ~]# systemctl enable iscsid.service<br>Login to the discovered target.</p>
<p>[root@node1 ~]# iscsiadm -m node -T iqn.2016-02.local.itzgeek.server:disk1 -p 192.168.12.20 -l<br>Logging in to [iface: default, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] (multiple)<br>Login to [iface: default, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] successful.<br>Skip to creating File System.</p>
<p>Configuring iSCSI Targets without CHAP Authentication:<br>Install the targetcli package on the server.</p>
<p>[root@server ~]# yum install targetcli -y<br>Once you installed the package, enter below command to get a iSCSI CLI for an interactive prompt.</p>
<p>[root@server ~]# targetcli<br>Warning: Could not load preferences file /root/.targetcli/prefs.bin.<br>targetcli shell version 2.1.fb41<br>Copyright 2011-2013 by Datera, Inc and others.<br>For help on commands, type ‘help’.</p>
<blockquote>
</blockquote>
<p>Now use an existing logical volume (/dev/vg_iscsi/lv_iscsi) as a block-type backing store for storage object “scsi_disk1_server“.</p>
<p>/&gt; cd backstores/block<br>/backstores/block&gt; create scsi_disk1_server /dev/vg_iscsi/lv_iscsi<br>Created block storage object scsi_disk1_server using /dev/vg_iscsi/lv_iscsi.<br>Create a target.</p>
<p>/backstores/block&gt; cd /iscsi<br>/iscsi&gt; create iqn.2016-02.local.itzgeek.server:disk1<br>Created target iqn.2016-02.local.itzgeek.server:disk1.<br>Created TPG 1.<br>Global pref auto_add_default_portal=true<br>Created default portal listening on all IPs (0.0.0.0), port 3260.<br>/iscsi&gt;<br>Create ACL for client machine (It’s the IQN which clients use to connect).</p>
<p>/iscsi&gt; cd /iscsi/iqn.2016-02.local.itzgeek.server:disk1/tpg1/acls<br>/iscsi/iqn.20…sk1/tpg1/acls&gt; create iqn.2016-02.local.itzgeek.server:node1node2<br>Created Node ACL for iqn.2016-02.local.itzgeek.server:node1node2<br>By default authentication is enabled, disable it.</p>
<p>/iscsi/iqn.20…sk1/tpg1/acls&gt; cd /iscsi/iqn.2016-02.local.itzgeek.server:disk1/tpg1/<br>/iscsi/iqn.20…er:disk1/tpg1&gt; set attribute authentication=0<br>Parameter authentication is now ‘0’.<br>/iscsi/iqn.20…er:disk1/tpg1&gt; set attribute generate_node_acls=1<br>Parameter generate_node_acls is now ‘1’.<br>Create a LUN under the target, The LUN should use the previously mentioned backing storage object named “scsi_disk1_server”</p>
<p>/iscsi/iqn.20…er:disk1/tpg1&gt; cd /iscsi/iqn.2016-02.local.itzgeek.server:disk1/tpg1/luns<br>/iscsi/iqn.20…sk1/tpg1/luns&gt; create /backstores/block/scsi_disk1_server<br>Created LUN 0.<br>Created LUN 0-&gt;0 mapping in node ACL iqn.2016-02.local.itzgeek.server:node1node2<br>Verify the target server configuration.</p>
<p>/iscsi/iqn.20…/tpg1/portals&gt; cd /<br>/&gt; ls<br>o- / …………………………………………………………………………………………………………. […]<br>  o- backstores ……………………………………………………………………………………………….. […]<br>  | o- block …………………………………………………………………………………….. [Storage Objects: 1]<br>  | | o- scsi_disk1_server ………………………………………….. [/dev/vg_iscsi/lv_iscsi (5.0GiB) write-thru activated]<br>  | o- fileio ……………………………………………………………………………………. [Storage Objects: 0]<br>  | o- pscsi …………………………………………………………………………………….. [Storage Objects: 0]<br>  | o- ramdisk …………………………………………………………………………………… [Storage Objects: 0]<br>  o- iscsi ……………………………………………………………………………………………… [Targets: 1]<br>  | o- iqn.2016-02.local.itzgeek.server:disk1 …………………………………………………………………. [TPGs: 1]<br>  |   o- tpg1 …………………………………………………………………………………….. [gen-acls, no-auth]<br>  |     o- acls ……………………………………………………………………………………………. [ACLs: 1]<br>  |     | o- iqn.2016-02.local.itzgeek.server:node1node2 …………………………………………………. [Mapped LUNs: 1]<br>  |     |   o- mapped_lun0 …………………………………………………………… [lun0 block/scsi_disk1_server (rw)]<br>  |     o- luns ……………………………………………………………………………………………. [LUNs: 1]<br>  |     | o- lun0 ……………………………………………………… [block/scsi_disk1_server (/dev/vg_iscsi/lv_iscsi)]<br>  |     o- portals ………………………………………………………………………………………. [Portals: 1]<br>  |       o- 0.0.0.0:3260 ……………………………………………………………………………………….. [OK]<br>  o- loopback …………………………………………………………………………………………… [Targets: 0]Save and exit from target CLI.<br>/&gt; saveconfig<br>Last 10 configs saved in /etc/target/backup.<br>Configuration saved to /etc/target/saveconfig.json<br>/&gt; exit<br>Global pref auto_save_on_exit=true<br>Last 10 configs saved in /etc/target/backup.<br>Configuration saved to /etc/target/saveconfig.json<br>Enable and restart the target service.</p>
<p>[root@server ~]# systemctl enable target.service<br>[root@server ~]# systemctl restart target.service<br>Configure the firewall to allow iSCSI traffic.</p>
<p>[root@server ~]# firewall-cmd –permanent –add-port=3260/tcp<br>[root@server ~]# firewall-cmd –reload<br>Configure Initiator without CHAP authentication:<br>Now it’s the time to configure a client machine to use this target as a storage, install below package on the client machine (node1).</p>
<p>[root@node1 ~]# yum install iscsi-initiator-utils -y<br>Edit below file and add iscsi initiator name.</p>
<p>[root@node1 ~]# vi /etc/iscsi/initiatorname.iscsi<br>InitiatorName=iqn.2016-02.local.itzgeek.server:node1node2<br>Discover the target using below command.</p>
<p>[root@node1 ~]# iscsiadm -m discovery -t st -p 192.168.12.20<br> 192.168.12.20:3260,1 iqn.2016-02.local.itzgeek.server:disk1<br>Restart and enable the initiator service.</p>
<p>[root@node1 ~]# systemctl restart iscsid.service<br>[root@node1 ~]# systemctl enable iscsid.service<br>Login to the discovered target.</p>
<p>[root@node1 ~]# iscsiadm -m node -T iqn.2016-02.local.itzgeek.server:disk1 -p 192.168.12.20 -l<br>Logging in to [iface: default, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] (multiple)<br>Login to [iface: default, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] successful.<br>Creating File System:<br>After login (connecting) to discovered target, have a look at messages file. You would find similar output like below, from where you can find a name of the disk.</p>
<p>[root@node1 ~]# cat /var/log/messages<br>Feb 23 14:54:47 node2 kernel: sd 34:0:0:0: [sdb] 10477568 512-byte logical blocks: (5.36 GB/4.99 GiB)<br>Feb 23 14:54:47 node2 kernel: sd 34:0:0:0: [sdb] Write Protect is off<br>Feb 23 14:54:47 node2 kernel: sd 34:0:0:0: [sdb] Write cache: disabled, read cache: enabled, doesn’t support DPO or FUA<br>Feb 23 14:54:48 node2 kernel: sdb: unknown partition table<br>Feb 23 14:54:48 node2 kernel: sd 34:0:0:0: [sdb] Attached SCSI disk<br>Feb 23 14:54:48 node2 iscsid: Could not set session2 priority. READ/WRITE throughout and latency could be affected.<br>Feb 23 14:54:48 node2 iscsid: Connection2:0 to [target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] through [iface: default] is operational now</p>
<p>List down the attached disks.</p>
<p>[root@node1 ~]# cat /proc/partitions<br>major minor  #blocks  name</p>
<p>   8        0  104857600 sda<br>   8        1     512000 sda1<br>   8        2  104344576 sda2<br>  11        0    1048575 sr0<br> 253        0    2113536 dm-0<br> 253        1   52428800 dm-1<br> 253        2   49799168 dm-2<br>   8       16    5238784 sdb<br>Format the new disk (for sake of article, I have formated whole disk instead of creating partition)</p>
<p>root@node1 ~]# mkfs.xfs /dev/sdb<br>meta-data=/dev/sdb               isize=256    agcount=8, agsize=163712 blks<br>         =                       sectsz=512   attr=2, projid32bit=1<br>         =                       crc=0<br>data     =                       bsize=4096   blocks=1309696, imaxpct=25<br>         =                       sunit=0      swidth=0 blks<br>naming   =version 2              bsize=4096   ascii-ci=0 ftype=0<br>log      =internal log           bsize=4096   blocks=2560, version=2<br>         =                       sectsz=512   sunit=0 blks, lazy-count=1<br>realtime =none                   extsz=4096   blocks=0, rtextents=0</p>
<p>Mount the disk.</p>
<p>[root@node1 ~]# mount /dev/sdb /mnt<br>verify the disk is mounted using below command.</p>
<p>[root@node1 ~]# df -hT<br>Filesystem              Type      Size  Used Avail Use% Mounted on<br>/dev/mapper/centos-root xfs        50G  955M   50G   2% /<br>devtmpfs                devtmpfs  908M     0  908M   0% /dev<br>tmpfs                   tmpfs     914M   54M  861M   6% /dev/shm<br>tmpfs                   tmpfs     914M  8.5M  905M   1% /run<br>tmpfs                   tmpfs     914M     0  914M   0% /sys/fs/cgroup<br>/dev/mapper/centos-home xfs        48G   33M   48G   1% /home<br>/dev/sda1               xfs       497M   97M  401M  20% /boot<br>/dev/sdb                xfs       5.0G   33M  5.0G   1% /mnt<br>In case you want to de-attach the added disk, please follow the procedure (unmount and logout).</p>
<p>[root@node1 ~]# umount /mnt/<br>[root@node1 ~]# iscsiadm -m node -T iqn.2016-02.local.itzgeek.server:disk1 -p 192.168.12.20 -u<br>Logging out of session [sid: 1, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260]<br>Logout of [sid: 1, target: iqn.2016-02.local.itzgeek.server:disk1, portal: 192.168.12.20,3260] successful.<br>That’s All.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/28/centos7+mysql5.7.11实现主从复制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/28/centos7+mysql5.7.11实现主从复制/" itemprop="url">centos7+mysql5.7.11实现主从复制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-28T16:12:22+08:00">
                2019-02-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="centos7-mysql5-7-11实现主从复制"><a href="#centos7-mysql5-7-11实现主从复制" class="headerlink" title="centos7+mysql5.7.11实现主从复制"></a>centos7+mysql5.7.11实现主从复制</h3><p>1  首先检测当前的系统是否已经安装了MySQL</p>
<p>　　yum list installed | grep mysql</p>
<p>　　如果有的话，删除</p>
<p>2  下载rpm库资源，在网页 <a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/repo/yum/</a> 中可以自己选择合适的版本， 然后安装</p>
<p>　　因为本人的版本是centos 7 ，所以：</p>
<p>　　　　 wget  <a href="https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm" target="_blank" rel="noopener">https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</a></p>
<p>　　　　yum localinstall mysql57-community-release-el7-11.noarch.rpm</p>
<p>　　如果不想安装最新版本的mysql，可以参考 <a href="https://translate.google.cn/#en/zh-CN/MySQL" target="_blank" rel="noopener">https://translate.google.cn/#en/zh-CN/MySQL</a> Cluster CGE    进行设置。</p>
<p>3  安装并启动mysql</p>
<p>　　yum install mysql-community-server</p>
<p>　　service  mysqld  start</p>
<p>4  初始的可能的mysql配置</p>
<p>　　mysql安装后默认会生成一个随机密码，我们可以通过以下命令进行查看：</p>
<p>　　　　grep password  /var/log/mysql.log  </p>
<p>　　然后使用登录mysql</p>
<p>　　　　mysql -u root -p</p>
<p>　　修改密码：</p>
<p>　　　　SET PASSWORD = PASSWORD(“新密码”)</p>
<p>　　　　由于mysql可能(默认)加载了密码验证插件，所以如果新密码过于简单可能会报错。</p>
<p>　　　　解决方法：</p>
<p>　　　　　　set  global validate_password_policy = 0;     //  这样将验证规则改为基于长度</p>
<p>　　　　　　set global  validate_password_length = 1;   // 设置密码最短长度，本例中设置为1</p>
<p>　　　　还有其他解决办法，详情请看：<a href="https://dev.mysql.com/doc/refman/5.7/en/validate-password-options-variables.html" target="_blank" rel="noopener">https://dev.mysql.com/doc/refman/5.7/en/validate-password-options-variables.html</a></p>
<p>　　创建主从复制用户并授权：</p>
<p>　　　　grant replication slave on <em>.</em> to mncu@hostname  identified by ‘password’;</p>
<p>　　　　</p>
<p>  5  关闭selinux </p>
<p>　　setenforce 0</p>
<p>　　vim /etc/selinux/config   将SELINUX参数设置为disabled</p>
<p>6  防火墙设置</p>
<p>　　因为centos默认的防火墙是Firewall而不是iptables，所以设置一下。</p>
<p>　　　　firewall-cmd –add-port=3306/tcp</p>
<p>　　　　firewall-cmd –permanent –add-port=3306/tcp</p>
<p>　　　　firewall-cmd –reload success</p>
<p>7  配置mysql配置文件。</p>
<p>　　主：</p>
<p>　　　　vim /etc/my.cnf  添加以下几行：</p>
<p>　　　　log-bin=mysql-bin　　　　   #  slave会基于此log-bin来做replication<br>　　　　server-id=1 　　　　　　　 #  master的标示<br>　　　　innodb_flush_log_at_trx_commit=1<br>　　　　sync_binlog=1</p>
<p>　　从：</p>
<p>　　　　vim /etc/my.cnf  添加该行：</p>
<p>　　　　server-id=2 #slave的标示<br>8  配置主从：</p>
<p>　　主：</p>
<p>　　　　show  master status;</p>
<p>　　　　会显示如下信息：</p>
<p>　　　　　　　File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |<br>　　　　+——————+———-+————–+——————+——————-+<br>　　　　| mysql-bin.000001 |      329 |              |                  |                </p>
<p>　　从：</p>
<p>　　　　stop slave;<br>　　　　change master to master_user=’mncu’,master_password=’123456’,master_host=’192.168.1.11’,master_port=3306,master_log_file=’mysql-bin.000001’,master_log_pos=329;<br>　　　　start slave;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/21/mysql索引问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="范澳河">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/微信图片_20190628155231.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="范澳河技术博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/21/mysql索引问题/" itemprop="url">mysql索引问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-21T16:12:22+08:00">
                2019-02-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="mysql索引问题"><a href="#mysql索引问题" class="headerlink" title="mysql索引问题"></a>mysql索引问题</h3><p>索引用于快速找出在某个列中有一特定值的行。不使用索引，MySQL必须从第1条记录开始然后读完整个表直到找出相关的行，还需要考虑每次读入数据页的IO开销。而如果采取索引，则可以根据索引指向的页以及记录在页中的位置，迅速地读取目标页进而获取目标记录。</p>
<p>大多数情况下都（默认）采用B树来构建索引。只是空间列类型的索引使用R-树，并且MEMORY表还支持hash索引。B树是平衡多叉树，每个节点存放多少个值取决于值所占的空间，这与每一张数据页存放多少条记录与记录信息量有关同理。节点中的值是以非降序进行排列的，节点中的值总是小于等于指向它的结点中的值。</p>
<p>MySQL使用B树构造索引的情况下，是由叶子指向具体的页和记录的。并且一个叶子有一个指针指向下一个叶子。</p>
<p>使用索引需要注意：</p>
<p>⑴只对WHERE和ORDER BY需要查询的字段设置索引，避免无意义的硬盘开销；</p>
<p>⑵组合索引支持前缀索引；</p>
<p>⑶更新表的时候，如增删记录，MySQL会自动更新索引，保持树的平衡；因此更多的索引意味着更多的维护成本</p>
<p> 索引的字段类型问题</p>
<p>text类型，也可建索引（需指定长度）<br>myisam存储引擎索引键长度综合不能超过1000字节<br>用来筛选的值尽量保持和索引列同样的数据类型<br>索引分四类：</p>
<p>index —-普通的索引,数据可以重复</p>
<p>fulltext—-全文索引，用来对大表的文本域(char，varchar，text)进行索引。语法和普通索引一样。 </p>
<p>unique —-唯一索引,唯一索引,要求所有记录都唯一</p>
<p>primary key —-主键索引,也就是在唯一索引的基础上相应的列必须为主键</p>
<p>like 不能用索引？</p>
<p>尽量减少like，但不是绝对不可用，”xxxx%” 是可以用到索引的，<br>想象一下，你在看一本成语词典，目录是按成语拼音顺序建立，查询需求是，你想找以 “一”字开头的成语（”一%“），和你想找包含一字的成语（“%一%”）</p>
<p>除了like，以下操作符也可用到索引：<br>&lt;，&lt;=，=，&gt;，&gt;=，BETWEEN，IN</p>
<p>&lt;&gt;，not in ，！=则不行</p>
<p>原则</p>
<p>　　 1，单表数据太少，索引反而会影响速度；更新非常频繁的数据不适宜建索引</p>
<p>　　 2，where后的条件，order by ,group by 等这样过滤时，后面的字段最好加上索引。根据实际情况，选择PRIMARY KEY、UNIQUE、INDEX等索引，但是不是越多越好，要适度</p>
<p>   　3，联合查询，子查询等多表操作时关连字段要加索引</p>
<p>ps：数据量特别大的时候，最好不要用联合查询，即使你做了索引</p>
<p>多列查询该如何建索引?<br>一次查询只能用到一个索引，所以 首先枪毙 a，b各建索引方案</p>
<p>a还是b？ 谁的区分度更高（同值的最少），建谁！</p>
<p>当然，联合索引也是个不错的方案，ab，还是ba，则同上，区分度高者，在前</p>
<p>联合索引的问题?<br>where a = “xxx” 可以使用 AB 联合索引<br>where b = “xxx” 则不可 （再想象一下，这是书的目录？）</p>
<p>所以，大多数情况下，有AB索引了，就可以不用在去建一个A索引了</p>
<p>详解：</p>
<p>联合索引又叫复合索引。对于复合索引:Mysql从左到右的使用索引中的字段，一个查询可以只使用索引中的一部份，但只能是最左侧部分。例如索引是key index (a,b,c). 可以支持a | a,b| a,b,c 3种组合进行查找，但不支持 b,c进行查找 .当最左侧字段是常量引用时，索引就十分有效。</p>
<p>两个或更多个列上的索引被称作复合索引。<br>利用索引中的附加列，您可以缩小搜索的范围，但使用一个具有两列的索引 不同于使用两个单独的索引。复合索引的结构与电话簿类似，人名由姓和名构成，电话簿首先按姓氏对进行排序，然后按名字对有相同姓氏的人进行排序。如果您知 道姓，电话簿将非常有用；如果您知道姓和名，电话簿则更为有用，但如果您只知道名不姓，电话簿将没有用处。<br>所以说创建复合索引时，应该仔细考虑列的顺序。对索引中的所有列执行搜索或仅对前几列执行搜索时，复合索引非常有用；仅对后面的任意列执行搜索时，复合索引则没有用处。<br>如：建立 姓名、年龄、性别的复合索引。</p>
<p>create table test(<br>a int,<br>b int,<br>c int,<br>KEY a(a,b,c)<br>);</p>
<p>优: select * from test where a=10 and b&gt;50<br>差: select * from test where a50</p>
<p>优: select * from test order by a<br>差: select * from test order by b<br>差: select * from test order by c</p>
<p>优: select * from test where a=10 order by a<br>优: select * from test where a=10 order by b<br>差: select * from test where a=10 order by c</p>
<p>优: select * from test where a&gt;10 order by a<br>差: select * from test where a&gt;10 order by b<br>差: select * from test where a&gt;10 order by c</p>
<p>优: select * from test where a=10 and b=10 order by a<br>优: select * from test where a=10 and b=10 order by b<br>优: select * from test where a=10 and b=10 order by c</p>
<p>优: select * from test where a=10 and b=10 order by a<br>优: select * from test where a=10 and b&gt;10 order by b<br>差: select * from test where a=10 and b&gt;10 order by c</p>
<p><img src="http://img0.ph.126.net/fWsA1uLa_kJCxVEph7JIQQ==/6597240190959961370.jpg" alt="avatar"></p>
<p>1.索引越少越好<br>原因：主要在修改数据时，第个索引都要进行更新，降低写速度。<br>2.最窄的字段放在键的左边<br>3.避免file sort排序，临时表和表扫描.<br>哪些常见情况不能用索引?<br>like “%xxx”<br>not in ， ！=<br>对列进行函数运算的情况（如 where md5(password) = “xxxx”）<br>WHERE index=1 OR A=10<br>存了数值的字符串类型字段（如手机号），查询时记得不要丢掉值的引号，否则无法用到该字段相关索引，反之则没关系<br>也即</p>
<p>select * from test where mobile = 13711112222;</p>
<p>可是无法用到mobile字段的索引的哦（如果mobile是char 或 varchar类型的话）</p>
<p>btw，千万不要尝试用int来存手机号（为什么？自己想！要不自己试试）</p>
<p>覆盖索引(Covering Indexes)拥有更高效率<br>索引包含了所需的全部值的话，就只select 他们，换言之，只select 需要用到的字段，如无必要，可尽量避免select *</p>
<p>NULL 的问题<br>NULL会导致索引形同虚设，所以在设计表结构时应避免NULL 的存在（用其他方式表达你想表达的NULL，比如 -1？）</p>
<p>如何查看索引信息，如何分析是否正确用到索引?<br>show index from tablename;<br>explain select ……;</p>
<p>关于explain，改天可以找个时间专门写一篇入门帖，在此之前，可以尝试 google</p>
<p>了解自己的系统，不要过早优化!
过早优化，一直是个非常讨厌而又时刻存在的问题，大多数时候就是因为不了解自己的系统，不知道自己系统真正的承载能力</p>
<p>比如：几千条数据的新闻表，每天几百几千次的正文搜索，大多数时候我们可以放心的去like，而不要又去建一套全文搜索什么的，毕竟cpu还是比人脑厉害太多</p>
<p>最后：永远别忘记的关键词 sql注入</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/微信图片_20190628155231.jpg" alt="范澳河">
          <p class="site-author-name" itemprop="name">范澳河</p>
           
              <p class="site-description motion-element" itemprop="description">Python全栈开发</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">61</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">范澳河</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Gemini
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
